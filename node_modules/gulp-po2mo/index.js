
const map = require('map-stream');
const gettextParser = require('gettext-parser');

function gulpPo2Mo() {

	return map(function(file, cb){

        let translationObject = gettextParser.po.parse(file.contents);
        file.contents = gettextParser.mo.compile(translationObject);
		
		file.path = file.path.replace('.po', '.mo');
		
		cb(false, file);
	}); 
	
}

module.exports = gulpPo2Mo;